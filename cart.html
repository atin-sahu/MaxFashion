<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script>
        $(function () {
            $("#header").load("Nav_Bar.html");
            // $("#footer").load("footer.html");
        });
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style> 
        #subtotal{
            display: flex;
            
        }
    </style>

    <title>Cart</title>
</head>
<body>
    <div id="header"></div>
    <div class="container mt-5" style="width: 80%;">
        <div>
            <h4 style="font-weight: 400;">Your Shopping Basket ( <span id="no_items"></span> Items )</h4>
        </div>
        <div class="mt-5 w-100 mb-5" style="font-size: 12px;border: .5px solid goldenrod;">
            <ul class="pt-2"> <span style="color: #FF5752;">Get the offer</span> 
                <li> Flat 200 Off on shopping worth 1999 and above. Code- MAX200</li>  
                <li>Flat 200 Off on shopping worth 1499 and above. Code- NEW200 (First purchase only)</li>
            </ul>
        </div>
    </div>
    <div class="container " style="width: 80%;">
        <div class="row ">
            <div class="col-12 col-sm-12 col-md-8 ">

                <table>
                    <thead class="">
                        <tr class="border-top border-bottom">
                            <td>Item</td>
                            <td class="ps-2">Description</td>
                            <td class="ps-3">Price</td>
                            <!-- <td>Quantity</td>
                            <td>Total Price</td> -->
                        </tr>
                        <tr>
                            <td><span style="color: #303AB2;font-size: 25px;font-weight: 700;">ma</span><span style="color: red;font-size: 25px;font-weight: 700;">x</span></td>
                        </tr>
                    </thead>
                    <tbody >
                        
                       
                    </tbody>
                </table>
                <hr class="bg-light">
                <div>
                    <p>Ways to Pay</p>
                    <div class="col-3 col-sm-4 col-md-8">
                        <img src="https://i1.lmsin.net/website_images/ae/checkout/logo-visa.png" style="width: 90px;height: 50px;" class="me-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/ae/checkout/logo-mc.png" style="width: 60px;height: 50px;" class="me-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/in/checkout/logo-rupay.svg" style="width: 50px;height: 50px;" class="me-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/ae/checkout/logo-cash.png" style="width: 90px;height: 30px;" class="me-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/in/checkout/logo-netbanking.svg" style="width: 90px;height: 30px;" class="me-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/in/checkout/logo-wallet.svg" style="width: 90px;height: 30px;" class="me-4 mt-4" alt="">
                        <img src="https://i1.lmsin.net/website_images/in/checkout/logo-rewards.svg" style="width: 90px;height: 30px;" class="me-4 mt-4" alt="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-12 col-md-4 " id="total_price">
                
                <div style="display: flex;justify-content: space-between;">
                    <div>
                        <p style="color: #8C9196; font-size: 15px;">Subtotal:</p>
                    </div>
                    <div>
                        <p class="subTotal" style="color: #8C9196;font-size: 15px;">₹ </p>
                    </div>
                </div>

                <div style="display: flex;justify-content: space-between;">
                    <div >
                        <p style="color: #8C9196;font-size: 15px;"> Standard Ground Shipping:</p>
                    </div>
                    <div>
                        <p  style="color: #00B037;font-size: 15px;">₹ Free</p>
                    </div>
                </div>


                <div style="display: flex;justify-content: space-between;">
                    <div >
                        <p style="color: #8C9196;font-size: 15px;">Offer Savings:</p>
                    </div>
                    <div>
                        <p  style="color: #00B037;font-size: 15px;">₹ 0</p>
                    </div>
                </div>


                <div style="display: flex;justify-content: space-between;">
                    <div >
                        <h4>TOTAL</h4>
                    </div>
                    <div>
                        <p id="subTotal_sum"></p>
                    </div>
                </div>
                <center>
                    <button class="w-100 border-0 pt-2 pb-2 rounded" onclick="window.location.href = 'CheckOut.html'" style="background-color: #303AB2;color: white;">Proceed to Checkout</button>
                </center>

                <p>
                    <a class="btn btn-light mt-3 w-100" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                        <img src="promocode.PNG" alt="" style="float: left;" class="ms-2 me-2"><span style="float: left;">Got a promo/Voucher Code?</span><i class="fa fa-angle-down me-3" style="float: right;"></i> 
                      </a>

                      <div class="collapse" id="collapseExample">
                        <div class="card card-body">
                            <p>
                                <input type="text" class="border-0" placeholder="Enter promo code"> <a href="" class="pe-1 border-end" style="text-decoration: none;font-weight: 300;" >Apply</a><a href="" class="ps-1" style="text-decoration: none;">Cancel</a>
                            </p>
                        </div>
                      </div>
                </p>
                <p class="mt-3 bg bg-light">
                    <img src="have_gift_card.PNG" class="ms-4 me-2" alt=""> <span style="font-weight: 300;">Have a Gift Card? Redeem it at checkout.</span>
                </p>


            
            </div>
        </div>
    </div>
    
</body>
</html>
<script>
    var cartArr = JSON.parse(localStorage.getItem('cartItems'));
    // console.log(cartArr);
    
    cart(cartArr);
    function cart(cartArr){
    document.querySelector('tbody').innerHTML = "";
    document.getElementById('no_items').textContent = cartArr.length || 0;
    document.querySelector('.subTotal').textContent="₹"+ total || 0;
    document.querySelector('#subTotal_sum').textContent="₹"+total || 0;
    cartArr.map(function(data,index){
        var tr = document.createElement('tr');
        
        var td1 = document.createElement('td');
        var image = document.createElement('img');
        image.style.width = '130px';
        image.style.height = '150px';
        image.style.marginBottom = '15px'
        image.setAttribute('src',data.image_url);
        td1.append(image);

        var td2 = document.createElement('td');
        td2.style.verticalAlign = 'Top';
        td2.style.paddingLeft = '10px'
        
        var name = document.createElement('h5');
        name.textContent = data.name;
        name.style.fontSize = '14px';
        name.style.fontWeight = '700';
         
        
        var color = document.createElement('p');
        color.textContent = "Color: red";
        color.style.fontSize = '13px'
        color.style.margin = '0px 0px 0px 0px'
        
        var size = document.createElement('p');
        size.textContent = 'Size: M';
        size.style.fontSize = '13px'
        size.style.paddingTop = '-10px'

        var remove1 = document.createElement('button');
        remove1.textContent = 'Remove';
        remove1.style.margin = '49px 0px 0px 0px';
        remove1.style.fontSize = '12px';
        remove1.style.color = 'grey';
        remove1.style.border = 'none';
        remove1.addEventListener('click',function(){
            deleteItem(index);
        });

        

        td2.append(name,color,size,remove1);




        var td3 = document.createElement('td');
        td3.textContent = "₹"+data.price;
        td3.style.verticalAlign = 'Top';
        td3.style.paddingLeft = '20px'
        td3.style.fontWeight = '500';

        tr.append(td1,td2,td3);
        document.querySelector("tbody").append(tr);



        //total price section
        // var div = document.createElement('div');

        // var div1 = document.createElement('div');
        // div1.setAttribute('id','subtotal');

        // var div1_one_sub = document.createElement('p');
        // div1_one_sub.textContent = "subtotal";

        // var div1_one_price = document.createElement('p');
        // div1_one_price.textContent = "123";

        // div.append(div1_one_sub,div1_one_price);

        // document.getElementById("total_price").append(div);


    }); 
}

    // Total Price
    var total = cartArr.reduce(function(acc,cv){
        return acc + Number(cv.price)
    },0)
    // console.log(total);
    // for(var i = 0 ; i < total)
    document.querySelector('.subTotal').textContent="₹"+ total;
    document.querySelector('#subTotal_sum').textContent="₹"+total;
    document.getElementById('no_items').textContent = cartArr.length;

    // Delete Item
    function deleteItem(index){
        // console.log(index)
        cartArr.splice(index,1)
        // console.log(cartArr);
        localStorage.setItem("cartItems",JSON.stringify(cartArr));
        cart(cartArr);
    }

</script>